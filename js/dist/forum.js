module.exports=function(t){var n={};function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=n,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)o.d(e,i,function(n){return t[n]}.bind(null,i));return e},o.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="",o(o.s=23)}([function(t,n,o){"use strict";function e(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}o.d(n,"a",(function(){return e}))},function(t,n){t.exports=flarum.core.compat["common/extend"]},function(t,n){t.exports=flarum.core.compat["common/models/Discussion"]},function(t,n){t.exports=flarum.core.compat["common/app"]},function(t,n){t.exports=flarum.core.compat["common/Model"]},function(t,n){t.exports=flarum.core.compat["common/components/Button"]},function(t,n){t.exports=flarum.core.compat["common/helpers/username"]},function(t,n){t.exports=flarum.core.compat["common/components/Notification"]},function(t,n){t.exports=flarum.core.compat["common/Component"]},function(t,n){t.exports=flarum.core.compat["common/helpers/icon"]},function(t,n){t.exports=flarum.core.compat["common/components/DiscussionPage"]},function(t,n){t.exports=flarum.core.compat["common/components/CommentPost"]},function(t,n){t.exports=flarum.core.compat["common/components/PostMeta"]},,,function(t,n){t.exports=flarum.core.compat["common/components/Link"]},function(t,n){t.exports=flarum.core.compat["common/helpers/humanTime"]},function(t,n){t.exports=flarum.core.compat["common/helpers/userOnline"]},function(t,n){t.exports=flarum.core.compat["common/components/NotificationGrid"]},function(t,n){t.exports=flarum.core.compat["common/utils/PostControls"]},function(t,n){t.exports=flarum.core.compat["common/components/Post"]},function(t,n){t.exports=flarum.core.compat["common/components/Badge"]},,function(t,n,o){"use strict";o.r(n);var e=o(1),i=o(3),a=o.n(i),r=o(2),s=o.n(r),c=o(4),u=o.n(c),p=o(18),d=o.n(p),l=o(0),f=o(7),b=o.n(f),g=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.icon=function(){return"fas fa-comment-dots"},o.href=function(){var t=this.props.notification.subject();return app.route.discussion(t)},o.content=function(){return app.translator.trans("barg-init.forum.notification.content")},n}(b.a),h=o(5),I=o.n(h),v=o(19),y=o.n(v),P=o(10),B=o.n(P),x=o(11),N=o.n(x),_=function(){var t=function(t,n){return t.bargInitPost()&&t.bargInitPost().id()===n.id()},n=function(t){return app.translator.trans(t?"barg-init.forum.remove_barg_init":"barg-init.forum.this_barg_init")},o=function(t,n,o){t.save({bargInitPostId:n?o.id():0,bargInitUserId:app.session.user.id(),relationships:n?{bargInitPost:o,bargInitUser:app.session.user}:delete t.data.relationships.bargInitPost}).then((function(){app.current instanceof B.a&&app.current.get("stream").update(),m.redraw(),n&&m.route.set(app.route.discussion(t))}))};Object(e.extend)(y.a,"moderationControls",(function(e,i){if(!app.forum.attribute("useAlternativeBargInitUi")){var a=i.discussion(),r=t(a,i);i.pushAttributes({isBargInit:r}),"comment"===i.contentType()&&e.add("bargInit-dle",I.a.component({icon:"fa"+(r?"s":"r")+" fa-comment-dots",onclick:function(){o(a,r=!r,i)}},n(r)))}})),Object(e.extend)(N.a.prototype,"actionItems",(function(e){if(app.forum.attribute("useAlternativeBargInitUi")){var i=this.attrs.post,a=this.attrs.post.discussion(),r=t(a,i),s=!1!==a.bargInitPost();i.pushAttributes({isBargInit:r}),function(t,n){return n.isHidden()||null===n.attribute("alterbyteBidding")||1===n.number()||!t.canSelectBargInit()||!app.session.user}(a,i)||function(t){return!app.forum.attribute("canSelectBargInitOwnPost")&&t.user()&&t.user().id()===app.session.user.id()}(i)||!app.current.matches(B.a)||e.add("bargInit",I.a.component({className:s?r?"Button Button--primary":"Button Button--link":"Button Button--primary",onclick:function(){s=!s,o(a,r=!r,i)}},n(r)))}}))},O=o(20),j=o.n(O),U=o(12),C=o.n(U),S=o(6),k=o.n(S),A=o(17),w=o.n(A),H=(o(15),o(8)),D=o.n(H),T=o(9),M=o.n(T),V=o(16),z=o.n(V),G=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.view=function(){var t=this.attrs,n=t.post,o=t.discussion;return m("div",{className:"Post--BargInit"},n?m("span",null,M()("fas fa-check"),app.translator.trans("barg-init.forum.sale_button")):m("a",{href:app.route.post(n),config:m.route,"data-number":n.number()},M()("fas fa-check"),app.translator.trans("barg-init.forum.sale_button")),m("span",{className:"BargInit--User"},app.translator.trans("barg-init.forum.sale_label",{user:o.bargInitUser(),time_set:this.getSetTime(o),a:m("a",{onclick:function(){return m.route(app.route.user(o.bargInitUser()))}})})))},o.getSetTime=function(t){if(null!==t.bargInitSetAt())return z()(t.bargInitSetAt())},n}(D.a),L=function(t){function n(){return t.apply(this,arguments)||this}return Object(l.a)(n,t),n.prototype.view=function(){var t=this.attrs,n=t.post,o=t.discussion;return m("bargInit-dle-confirm",I.a.component({textContent:"Approve",onclick:function(){saveDiscussion(o,isBargInit,n)}}))},n}(D.a),q=function(t){function n(){return t.apply(this,arguments)||this}return Object(l.a)(n,t),n.prototype.view=function(){var t=this.attrs,n=t.post,o=t.discussion,e=function(t,n){return t.bargInitPost()&&t.bargInitPost().id()===n.id()}(o,n);return m("bargInit-dle-cancel",I.a.component({textContent:"Cancel",onclick:function(){!function(t,n,o){t.save({bargInitPostId:n?o.id():0,bargInitUserId:app.session.user.id(),relationships:n?{bargInitPost:o,bargInitUser:app.session.user}:delete t.data.relationships.bargInitPost}).then((function(){app.current instanceof B.a&&app.current.get("stream").update(),m.redraw(),n&&m.route.set(app.route.discussion(t))}))}(o,e=!e,n)}}))},n}(D.a),E=o(21),F=o.n(E),J=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.icon=function(){return"fas fa-check"},o.href=function(){var t=this.attrs.notification.subject();return app.route.discussion(t)},o.content=function(){var t=this.attrs.notification.fromUser();return app.translator.trans("barg-init.forum.notification.awarded",{user:t})},n}(b.a),K=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.icon=function(){return"fas fa-check"},o.href=function(){var t=this.props.notification.subject();return app.route.discussion(t)},o.content=function(){var t=this.props.notification.fromUser();return app.translator.trans("barg-init.forum.notification.barg_init_in_discussion",{user:t})},n}(b.a);a.a.initializers.add("alterbyte/barg-init",(function(){s.a.prototype.bargInitPost=u.a.hasOne("bargInitPost"),s.a.prototype.bargInitUser=u.a.hasOne("bargInitUser"),s.a.prototype.hasBargInit=u.a.attribute("hasBargInit"),s.a.prototype.startUserId=u.a.attribute("startUserId",Number),s.a.prototype.firstPostId=u.a.attribute("firstPostId",Number),s.a.prototype.canSelectBargInit=u.a.attribute("canSelectBargInit"),s.a.prototype.bargInitSetAt=u.a.attribute("bargInitSetAt",u.a.transformDate),a.a.notificationComponents.selectBargInit=g,a.a.notificationComponents.awardedBargInit=J,a.a.notificationComponents.BargInitInDiscussion=K,Object(e.extend)(s.a.prototype,"badges",(function(t){this.hasBargInit()&&!t.has("hidden")&&t.add("barg-init-badge",F.a.component({type:"bargInit",icon:"fas fa-check",label:a.a.translator.trans("barg-init.forum.sold_badge")}))})),_(),Object(e.extend)(N.a.prototype,"headerItems",(function(t){var n=this.attrs.post;n.discussion().bargInitPost()&&n.discussion().bargInitPost().id()===n.id()&&!n.isHidden()&&t.add("isBargInit",G.component({post:n,discussion:n.discussion()}))})),Object(e.extend)(N.a.prototype,"footerItems",(function(t){var n=this.attrs.post,o=n.discussion(),e=o.bargInitPost(),i=!0==(1===n.number())?this.attrs.post.data.relationships.user.data.id:null,a=i;o.bargInitPost()&&(this.bargInitUser=o.bargInitPost().data.relationships.user.data.id),app.session.user&&(this.appSeassionUser=app.session.user.data.id);var r=this.appSeassionUser!=this.bargInitUser;null!=i&&(this.notAuthor=this.appSeassionUser!=a);var s=r&&this.notAuthor,c=null!==this.attrs.post.attribute("alterbyteBidding");if(e&&c&&!e.isHidden()&&1===n.number()&&!n.isHidden()&&r&&this.notAuthor){var u=e.user(),p=e.attribute("alterbyteBidding");this.bidPost=void 0!==p?e.attribute("alterbyteBidding")+" ر.س":"Please login to see bid",t.add("bargInitPost approved",m("div",{className:"CommentPost"},m("div",{className:"Post-header"},m("ul",null,m("li",{className:"item-user"},m("div",{className:"PostUser"},u&&w()(u),m("h3",null,u?m("a",{href:app.route.user(u),config:m.route},k()(u)):k()(u)))),e.discussion()&&m("li",{className:"item-meta"},C.a.component({post:e})),G.component({post:e,discussion:o})),m("div",{Class:"item-bid"},m("input",{class:"bidValue",type:"text",name:"CommentBid",value:this.bidPost,readonly:!0}))),m("div",{className:"Post-body"},m.trust(e.contentHtml())),m("div",{className:"barg-footer"},m("li",{className:"item-confirm"}),m("li",{className:"item-cancel"}))),-10)}if(e&&c&&!e.isHidden()&&1===n.number()&&!n.isHidden()&&this.notAuthor&&!s){var d=e.user();null!==e.attribute("alterbyteBidding")+" ر.س"&&(this.bidPost=e.attribute("alterbyteBidding")+" ر.س"),t.add("bargInitPost approved",m("div",{className:"CommentPost"},m("div",{className:"Post-header"},m("ul",null,m("li",{className:"item-user"},m("div",{className:"PostUser"},d&&w()(d),m("h3",null,d?m("a",{href:app.route.user(d),config:m.route},k()(d)):k()(d)))),e.discussion()&&m("li",{className:"item-meta"},C.a.component({post:e})),G.component({post:e,discussion:o})),m("div",{Class:"item-bid"},m("input",{class:"bidValue",type:"text",name:"CommentBid",value:this.bidPost,readonly:!0}))),m("div",{className:"Post-body"},m.trust(e.contentHtml())),m("div",{className:"barg-footer"},m("li",{className:"item-confirm"},L.component({post:e,discussion:o})),m("li",{className:"item-cancel"},q.component({post:e,discussion:o})))),-10)}if(e&&c&&!e.isHidden()&&1===n.number()&&!n.isHidden()&&r&&!s){var l=e.user();null!==e.attribute("alterbyteBidding")+" ر.س"&&(this.bidPost=e.attribute("alterbyteBidding")+" ر.س"),t.add("bargInitPost approved",m("div",{className:"CommentPost"},m("div",{className:"Post-header"},m("ul",null,m("li",{className:"item-user"},m("div",{className:"PostUser"},l&&w()(l),m("h3",null,l?m("a",{href:app.route.user(l),config:m.route},k()(l)):k()(l)))),e.discussion()&&m("li",{className:"item-meta"},C.a.component({post:e})),G.component({post:e,discussion:o})),m("div",{Class:"item-bid"},m("input",{class:"bidValue",type:"text",name:"CommentBid",value:this.bidPost,readonly:!0}))),m("div",{className:"Post-body"},m.trust(e.contentHtml())),m("div",{className:"barg-footer"},m("li",{className:"item-confirm"}),m("li",{className:"item-cancel"},q.component({post:e,discussion:o})))),-10)}})),Object(e.extend)(j.a.prototype,"attrs",(function(t){var n=this.attrs.post;n.discussion().bargInitPost()&&n.discussion().bargInitPost().id()===n.id()&&!n.isHidden()&&(t.className+=" Post--bargInit")})),Object(e.extend)(d.a.prototype,"notificationTypes",(function(t){t.add("awardedBargInit",{name:"awardedBargInit",icon:"fas fa-check",label:a.a.translator.trans("barg-init.forum.notification.preferences.awarded_barg_init")}),t.add("BargInitInDiscussion",{name:"BargInitInDiscussion",icon:"fas fa-check",label:a.a.translator.trans("barg-init.forum.notification.preferences.barg_init_in_discussion")})}))}))}]);
//# sourceMappingURL=forum.js.map