module.exports=function(t){var n={};function o(r){if(n[r])return n[r].exports;var e=n[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=t,o.c=n,o.d=function(t,n,r){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)o.d(r,e,function(n){return t[n]}.bind(null,e));return r},o.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="",o(o.s=23)}([function(t,n,o){"use strict";function r(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}o.d(n,"a",(function(){return r}))},function(t,n){t.exports=flarum.core.compat["common/extend"]},function(t,n){t.exports=flarum.core.compat["common/models/Discussion"]},function(t,n){t.exports=flarum.core.compat["common/app"]},function(t,n){t.exports=flarum.core.compat["common/Model"]},function(t,n){t.exports=flarum.core.compat["common/components/Notification"]},function(t,n){t.exports=flarum.core.compat["common/components/CommentPost"]},,,function(t,n){t.exports=flarum.core.compat["common/components/Button"]},function(t,n){t.exports=flarum.core.compat["common/components/DiscussionPage"]},function(t,n){t.exports=flarum.core.compat["common/helpers/username"]},function(t,n){t.exports=flarum.core.compat["common/helpers/icon"]},function(t,n){t.exports=flarum.core.compat["common/components/Link"]},function(t,n){t.exports=flarum.core.compat["common/components/NotificationGrid"]},function(t,n){t.exports=flarum.core.compat["common/utils/PostControls"]},function(t,n){t.exports=flarum.core.compat["common/components/Post"]},function(t,n){t.exports=flarum.core.compat["common/components/PostMeta"]},function(t,n){t.exports=flarum.core.compat["common/helpers/userOnline"]},function(t,n){t.exports=flarum.core.compat["common/Component"]},function(t,n){t.exports=flarum.core.compat["common/helpers/humanTime"]},function(t,n){t.exports=flarum.core.compat["common/components/Badge"]},,function(t,n,o){"use strict";o.r(n);var r=o(1),e=o(3),a=o.n(e),i=o(2),s=o.n(i),c=o(4),u=o.n(c),p=o(14),f=o.n(p),l=o(0),d=o(5),b=o.n(d),g=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.icon=function(){return"fas fa-comment-dots"},o.href=function(){var t=this.props.notification.subject();return app.route.discussion(t)},o.content=function(){return app.translator.trans("barg-init.forum.notification.content")},n}(b.a),I=o(9),h=o.n(I),y=o(15),v=o.n(y),x=o(10),B=o.n(x),P=o(6),_=o.n(P),O=function(){var t=function(t,n){return t.bargInitPost()&&t.bargInitPost().id()===n.id()},n=function(t){return app.translator.trans(t?"barg-init.forum.remove_barg_init":"barg-init.forum.this_barg_init")},o=function(t,n,o){t.save({bargInitPostId:n?o.id():0,bargInitUserId:app.session.user.id(),relationships:n?{bargInitPost:o,bargInitUser:app.session.user}:delete t.data.relationships.bargInitPost}).then((function(){app.current instanceof B.a&&app.current.get("stream").update(),m.redraw(),n&&m.route.set(app.route.discussion(t))}))};Object(r.extend)(v.a,"moderationControls",(function(r,e){if(!app.forum.attribute("useAlternativeBargInitUi")){var a=e.discussion(),i=t(a,e);e.pushAttributes({isBargInit:i}),"comment"===e.contentType()&&r.add("bargInit-dle",h.a.component({icon:"fa"+(i?"s":"r")+" fa-comment-dots",onclick:function(){o(a,i=!i,e)}},n(i)))}})),Object(r.extend)(_.a.prototype,"actionItems",(function(r){if(app.forum.attribute("useAlternativeBargInitUi")){var e=this.attrs.post,a=this.attrs.post.discussion(),i=t(a,e),s=!1!==a.bargInitPost();e.pushAttributes({isBargInit:i}),function(t,n){return n.isHidden()||null===n.attribute("alterbyteBidding")||1===n.number()||!t.canSelectBargInit()||!app.session.user}(a,e)||function(t){return!app.forum.attribute("canSelectBargInitOwnPost")&&t.user()&&t.user().id()===app.session.user.id()}(e)||!app.current.matches(B.a)||r.add("bargInit",h.a.component({className:s?i?"Button Button--primary":"Button Button--link":"Button Button--primary",onclick:function(){s=!s,o(a,i=!i,e)}},n(i)))}}))},j=o(16),N=o.n(j),S=o(17),U=o.n(S),k=o(11),C=o.n(k),w=o(18),A=o.n(w),T=(o(13),o(19)),D=o.n(T),H=o(12),M=o.n(H),z=o(20),G=o.n(z),L=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.view=function(){var t=this.attrs,n=t.post,o=t.discussion;return m("div",{className:"Post--BargInit"},n?m("span",null,M()("fas fa-check"),app.translator.trans("barg-init.forum.sale_button")):m("a",{href:app.route.post(n),config:m.route,"data-number":n.number()},M()("fas fa-check"),app.translator.trans("barg-init.forum.sale_button")),m("span",{className:"BargInit--User"},app.translator.trans("barg-init.forum.sale_label",{user:o.bargInitUser(),time_set:this.getSetTime(o),a:m("a",{onclick:function(){return m.route(app.route.user(o.bargInitUser()))}})})))},o.getSetTime=function(t){if(null!==t.bargInitSetAt())return G()(t.bargInitSetAt())},n}(D.a),V=o(21),q=o.n(V),E=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.icon=function(){return"fas fa-check"},o.href=function(){var t=this.props.notification.subject();return app.route.discussion(t)},o.content=function(){var t=this.props.notification.fromUser();return app.translator.trans("barg-init.forum.notification.awarded",{user:t})},n}(b.a),F=function(t){function n(){return t.apply(this,arguments)||this}Object(l.a)(n,t);var o=n.prototype;return o.icon=function(){return"fas fa-check"},o.href=function(){var t=this.props.notification.subject();return app.route.discussion(t)},o.content=function(){var t=this.props.notification.fromUser();return app.translator.trans("barg-init.forum.notification.barg_init_in_discussion",{user:t})},n}(b.a);a.a.initializers.add("alterbyte/barg-init",(function(){s.a.prototype.bargInitPost=u.a.hasOne("bargInitPost"),s.a.prototype.bargInitUser=u.a.hasOne("bargInitUser"),s.a.prototype.hasBargInit=u.a.attribute("hasBargInit"),s.a.prototype.startUserId=u.a.attribute("startUserId",Number),s.a.prototype.firstPostId=u.a.attribute("firstPostId",Number),s.a.prototype.canSelectBargInit=u.a.attribute("canSelectBargInit"),s.a.prototype.bargInitSetAt=u.a.attribute("bargInitSetAt",u.a.transformDate),a.a.notificationComponents.selectBargInit=g,a.a.notificationComponents.awardedBargInit=E,a.a.notificationComponents.BargInitInDiscussion=F,Object(r.extend)(s.a.prototype,"badges",(function(t){this.hasBargInit()&&!t.has("hidden")&&t.add("barg-init-badge",q.a.component({type:"bargInit",icon:"fas fa-check",label:a.a.translator.trans("barg-init.forum.sold_badge")}))})),O(),Object(r.extend)(_.a.prototype,"headerItems",(function(t){var n=this.attrs.post;n.discussion().bargInitPost()&&n.discussion().bargInitPost().id()===n.id()&&!n.isHidden()&&t.add("isBargInit",L.component({post:n,discussion:n.discussion()}))})),Object(r.extend)(_.a.prototype,"footerItems",(function(t){var n=this.attrs.post,o=n.discussion(),r=o.bargInitPost(),e=null!==this.attrs.post.attribute("alterbyteBidding");if(r&&e&&!r.isHidden()&&1===n.number()&&!n.isHidden()){var a=r.user(),i=r.attribute("alterbyteBidding")+" ر.س";t.add("bargInitPost approved",m("div",{className:"CommentPost"},m("div",{className:"Post-header"},m("ul",null,m("li",{className:"item-user"},m("div",{className:"PostUser"},a&&A()(a),m("h3",null,a?m("a",{href:app.route.user(a),config:m.route},C()(a)):C()(a)))),r.discussion()&&m("li",{className:"item-meta"},U.a.component({post:r})),L.component({post:r,discussion:o})),m("div",{Class:"item-bid"},m("input",{class:"bidValue",type:"text",name:"CommentBid",value:i,readonly:!0}))),m("div",{className:"Post-body"},m.trust(r.contentHtml())),m("div",{className:"barg-footer"},m("li",{className:"item-confirm"},m("button",{type:"button"},"Confirm")),m("li",{className:"item-cancel"},m("button",{type:"button"},"Cancel")))),-10)}})),Object(r.extend)(N.a.prototype,"attrs",(function(t){var n=this.attrs.post;n.discussion().bargInitPost()&&n.discussion().bargInitPost().id()===n.id()&&!n.isHidden()&&(t.className+=" Post--bargInit")})),Object(r.extend)(f.a.prototype,"notificationTypes",(function(t){t.add("awardedBargInit",{name:"awardedBargInit",icon:"fas fa-check",label:a.a.translator.trans("barg-init.forum.notification.preferences.awarded_barg_init")}),t.add("BargInitInDiscussion",{name:"BargInitInDiscussion",icon:"fas fa-check",label:a.a.translator.trans("barg-init.forum.notification.preferences.barg_init_in_discussion")})}))}))}]);
//# sourceMappingURL=forum.js.map